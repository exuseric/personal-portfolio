---
import seo from "@/data/seo.json";
import { AstroFont } from "astro-font";
import Navigation from "@/components/navigation/Navigation.astro";
import "@/styles/global.css";
import Footer from "@/components/footer/Footer.astro";
import FaqSection from "@/components/FaqSection.astro";
---

<html lang={seo.language} data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content={seo.additionalMeta.viewport} />
    <title>{seo.title}</title>
    <meta name="description" content={seo.description} />
    <meta name="author" content={seo.author} />
    <meta name="keywords" content={seo.keywords} />
    <meta name="robots" content={seo.robots} />
    <meta name="language" content={seo.language} />
    <meta name="format-detection" content={seo.additionalMeta.formatDetection} />
    <meta name="referrer" content={seo.additionalMeta.referrer} />
    <meta name="color-scheme" content={seo.additionalMeta.colorScheme} />
    <meta name="supported-color-schemes" content={seo.additionalMeta.supportedColorSchemes} />

    <!-- Canonical and Sitemap -->
    <link rel="canonical" href={seo.siteUrl} />
    <link rel="sitemap" href="/sitemap-index.xml" />

    <!-- DNS Prefetch for external domains -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com" />
    <link rel="dns-prefetch" href="//fonts.gstatic.com" />
    <link rel="dns-prefetch" href="//eu-west-2.graphassets.com" />

    <!-- Standard favicon -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />

    <!-- PNG favicons -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png" />

    <!-- Apple Touch Icon (for iOS bookmarks) -->
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png" />

    <!-- Web App Manifest (if you're pretending your site is an app) -->
    <link rel="manifest" href="/site.webmanifest" />

    <meta name="theme-color" content={seo.themeColor} />
    <meta name="msapplication-TileColor" content={seo.themeColor} />

    <!-- Security Headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta http-equiv="X-Frame-Options" content="DENY" />
    <meta http-equiv="X-XSS-Protection" content="1; mode=block" />
    <meta http-equiv="Permissions-Policy" content="camera=(), microphone=(), geolocation=()" />

    <!-- Performance and Caching -->
    <meta http-equiv="Cache-Control" content="public, max-age=31536000" />

    <!-- Enhanced Person Schema -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Eric Maina",
        "alternateName": "Eric Gathoni",
        "url": "https://ericmaina.me",
        "image": "https://ericmaina.me/_astro/logo.DR1VfmNz_1wiNMl.webp",
        "jobTitle": "Fullstack Developer",
        "description": "Frontend-heavy fullstack developer focused on fast, accessible, and beautiful websites. Combines development, UI/UX, and branding with experience across Shopify, Astro, and Pocketbase.",
        "address": {
          "@type": "PostalAddress",
          "addressCountry": "KE",
          "addressLocality": "Kenya"
        },
        "sameAs": [
          "https://github.com/exuseric",
          "https://linkedin.com/in/exuseric"
        ],
        "worksFor": {
          "@type": "Organization",
          "name": "Yellow Pages Kenya"
        },
        "alumniOf": {
          "@type": "Organization",
          "name": "The Internet, School of Hard DOM Manipulation"
        },
        "knowsAbout": [
          "Frontend Development",
          "Backend Development",
          "UI/UX Design",
          "Performance Optimization",
          "Accessibility",
          "Astro",
          "Pocketbase",
          "Shopify",
          "HTML",
          "CSS",
          "JavaScript"
        ],
        "knowsLanguage": [
          {
            "@type": "Language",
            "name": "English"
          },
          {
            "@type": "Language",
            "name": "JavaScript"
          }
        ],
        "hasOccupation": {
          "@type": "Occupation",
          "name": "Fullstack Developer",
          "description": "Develops web applications with focus on frontend performance and accessibility"
        }
      }
    </script>

    <!-- Website Schema -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Eric Gathoni Portfolio",
        "url": "https://ericmaina.me",
        "description": "Professional portfolio showcasing fullstack development work, specializing in React, Astro, and web accessibility.",
        "author": {
          "@type": "Person",
          "name": "Eric Gathoni"
        },
        "publisher": {
          "@type": "Person",
          "name": "Eric Gathoni"
        },
        "potentialAction": {
          "@type": "SearchAction",
          "target": "https://ericmaina.me?search={search_term_string}",
          "query-input": "required name=search_term_string"
        }
      }
    </script>

    <!-- FAQ Schema -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
          {
            "@type": "Question",
            "name": "What kind of projects do you work on?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "I work on fast, accessible, and design-forward websites. I'm a frontend-heavy fullstack developer, so I handle everything from clean code to clean UI. I've built Shopify storefronts, launched static sites with Astro, and integrated Pocketbase for backend magic."
            }
          },
          {
            "@type": "Question",
            "name": "What technologies do you use?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "I mostly work with JavaScript, Astro, Pocketbase, HTML, CSS, and Shopify. I care a lot about performance, accessibility, and code quality—so I'm constantly refining my stack to build better experiences."
            }
          },
          {
            "@type": "Question",
            "name": "Do you do both design and development?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Yes! My background blends UI/UX design with solid development skills. Whether I'm creating a layout or writing the logic behind it, I care about both how things look and how they work."
            }
          },
          {
            "@type": "Question",
            "name": "Are you available for freelance or contract work?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Yes, I'm available for freelance and contract projects. I'm into work that's challenging, collaborative, and built on trust. If that sounds like your team, let's talk."
            }
          },
          {
            "@type": "Question",
            "name": "Can you improve my existing website?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Absolutely. I can audit your current site for performance and accessibility issues, help redesign it, or just clean up the code. It depends on what you need—I'm flexible."
            }
          },
          {
            "@type": "Question",
            "name": "What sets you apart from other developers?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "I care about the whole picture—code, design, branding, and user experience. I bring calm to chaotic projects, make smart decisions under pressure, and avoid building anything I wouldn't want to use myself."
            }
          },
          {
            "@type": "Question",
            "name": "Where are you based?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "I'm based in Kenya, but I work with clients all over the world. Time zones aren't a dealbreaker—I just care that the project's a good fit."
            }
          }
        ]
      }
    </script>

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content={seo.openGraph.type} />
    <meta property="og:url" content={seo.openGraph.url} />
    <meta property="og:title" content={seo.openGraph.title} />
    <meta property="og:description" content={seo.openGraph.description} />
    <meta property="og:image" content={seo.openGraph.image.url} />
    <meta property="og:image:width" content={seo.openGraph.image.width} />
    <meta property="og:image:height" content={seo.openGraph.image.height} />
    <meta property="og:image:alt" content={seo.openGraph.image.alt} />
    <meta property="og:locale" content={seo.openGraph.locale} />
    <meta property="og:site_name" content={seo.openGraph.siteName} />

    <!-- Twitter -->
    <meta name="twitter:card" content={seo.twitter.card} />
    <meta name="twitter:site" content={seo.twitter.site} />
    <meta name="twitter:creator" content={seo.twitter.creator} />
    <meta name="twitter:title" content={seo.twitter.title} />
    <meta name="twitter:description" content={seo.twitter.description} />
    <meta name="twitter:image" content={seo.twitter.image} />

    <!-- Fonts with performance optimization -->
    <AstroFont
      config={[
        {
          src: [],
          name: "DM Sans",
          preload: true,
          display: "swap",
          selector: "body",
          fallback: "sans-serif",
          cssVariable: "font-family-base",
          googleFontsURL:
            "https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&display=swap",

        },
        {
          src: [],
          name: "Geist Mono",
          preload: true,
          display: "swap",
          selector: "h1,h2",
          fallback: "monospace",
          cssVariable: "font-family-heading",
          googleFontsURL:
            "https://fonts.googleapis.com/css2?family=Geist+Mono:wght@100..900&display=swap",
        },
      ]}
    />
  </head>

  <body>
    <Navigation />
    <main id="main-content" class="page-wrapper">
      <slot />
      <FaqSection />
    </main>
    <Footer />
  </body>
</html>
