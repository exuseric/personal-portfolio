@import "./reset.css";
@import "./tokens.css";
@import "./theme.css";
@import "./form-elements.css";
@import "./animations.css";
@import "./button.css";

@layer utilities {
    .flex-between {
        display: flex;
        flex-flow: row wrap;
        align-items: center;
        justify-content: space-between;
    }

    .section-heading {
        text-transform: uppercase;
    }
}

@layer base {
    :root {
        interpolate-size: allow-keywords;

        --shadow-color: 0deg 0% 0%;
        --shadow-strength: 10%;
        --shadow-sm: 0 2px 6px hsl(var(--shadow-color) / calc(var(--shadow-strength)));
        --shadow-md: 0 4px 8px hsl(var(--shadow-color) / calc(var(--shadow-strength)));

        /* Layout */
        --content-width: min(100% - 2rem, 50rem); /*800px*/
        --site-width: min(100% - 2rem, 75rem); /*1200px*/
    }

    html,
    body {
        font-family: var(--font-family-base), sans-serif;
        color: var(--text-neutral-default);
        background-color: var(--surface-neutral-default);
        line-height: var(--lh-base);
        font-weight: 400;
        scroll-behavior: smooth;
        interpolate-size: allow-keywords;
    }

    body {
        position: relative;
        isolation: isolate;
        z-index: 1;
    }

    /* Typography */
    h1,
    h2,
    h3,
    h4,
    h5 {
        line-height: var(--lh-display);
        margin-bottom: var(--size-4);
        font-weight: 400;
        max-width: 25ch;
        orphans: 1;
    }

    h1,
    .h1 {
        font-size: var(--font-size-5xl);
        font-weight: 300;
    }

    h2,
    .h2 {
        font-size: var(--font-size-4xl);
    }

    h3,
    .h3 {
        font-size: var(--font-size-3xl);
    }

    h4,
    .h4 {
        font-size: var(--font-size-2xl);
    }

    h5,
    .h5 {
        font-size: var(--font-size-md);
    }

    p,
    ul,
    ol {
        margin-bottom: var(--size-4);
        font-size: var(--font-size-md);
    }

    small {
        font-size: var(--font-size-sm);
        color: var(--text-neutral-subtle);
    }

    p {
        max-width: 65ch;
        margin: 0;
    }
}

@layer components {
    .container {
        --padding-inline: 1rem;
        --content-max-width: var(--site-width);
        --breakout-max-width: calc(var(--content-max-width) * 0.2);
        --breakout-size: calc(
                (var(--breakout-max-width) - var(--content-max-width)) / 2
        );

        display: grid;
        grid-template-columns:
      [full-width-start] minmax(var(--padding-inline), 1fr)
      [breakout-start] minmax(0, var(--breakout-size)) [content-start] min(
        100% - (var(--padding-inline) * 2),
        var(--content-max-width)
      )
      [content-end] minmax(0, var(--breakout-size)) [breakout-end] minmax(
        var(--padding-inline),
        1fr
      )
      [full-width-end];
        width: 100%;
    }

    .container[data-container-md] {
        --content-max-width: var(--content-width);
    }

    .container > :not(.breakout, .full-width) {
        grid-column: content;
    }

    .container > .breakout {
        grid-column: breakout;
    }

    .container > .full-width {
        grid-column: full-width;
    }

    .page-wrapper {
        display: flex;
        flex-direction: column;

        min-height: 100vh;
        row-gap: var(--size-2);
    }

    [data-parent-container] {
        padding-block: var(--size-12);
    }

    [data-parent-container] h2 {
        margin-bottom: var(--size-4);
    }

    [data-content-wrapper] {
        width: var(--content-width);
        margin-inline: auto;
        display: flex;
        flex-direction: column;
        gap: var(--size-4);
        align-items: flex-start;
    }

    [data-offscreen] {
        content-visibility: auto;
        contain-intrinsic-size: auto 31.25rem;
    }
}

@layer components {
    .skeleton {
        width: 100%;
        height: 1em;
        background-color: var(--surface-neutral-subtle);
        position: relative;
        overflow: hidden;
    }

    .skeleton::after {
        content: "";
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        transform: translateX(-100%);
        background: linear-gradient(
                90deg,
                transparent,
                var(--color-neutral-200),
                transparent
        );
        animation: skeleton-loading 1.5s infinite;
    }

    @keyframes skeleton-loading {
        100% {
            transform: translateX(100%);
        }
    }

    .skeleton-text {
        display: flex;
        flex-direction: column;
        gap: var(--size-2);
    }

    .skeleton-text .skeleton:nth-child(3) {
        width: 75%;
    }
}

@layer animations {

    ::view-transition-old(root) {
        animation: 90ms cubic-bezier(0.4, 0, 1, 1) both fade-out,
        300ms cubic-bezier(0.4, 0, 0.2, 1) both slide-to-left;
    }

    ::view-transition-new(root) {
        animation: 210ms cubic-bezier(0, 0, 0.2, 1) 90ms both fade-in,
        300ms cubic-bezier(0.4, 0, 0.2, 1) both slide-from-right;
    }
}
