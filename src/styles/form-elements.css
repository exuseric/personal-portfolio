/* Base Input / Textarea / Select */
input,
textarea,
select {
    display: block;
    width: 100%;
    font-family: var(--font-family-base);
    font-size: var(--font-size-md);
    line-height: var(--lh-base);
    padding: var(--size-2) var(--size-3);
    border: var(--stroke-1) solid var(--surface-neutral-hover);
    border-radius: 0.375rem;
    background-color: var(--surface-neutral);
    color: var(--text-neutral);
    transition:
        border-color var(--transition-medium),
        outline-color var(--transition-medium),
        box-shadow var(--transition-medium),
        background-color var(--transition-anticipate-slow);
    outline: var(--stroke-1) solid transparent;
}

input:focus,
textarea:focus,
select:focus {
    border-color: transparent;
    box-shadow: 0 0 0 3px oklch(from var(--surface-accent) l c h / 5%);
    outline-color: var(--surface-accent);
}

/* Disabled */
input:disabled,
textarea:disabled,
select:disabled {
    background-color: var(--surface-neutral-subtle);
    color: var(--text-neutral-subtle);
    cursor: not-allowed;
    opacity: 0.6;
}

/* Error / Valid States */
input:invalid:not(:placeholder-shown),
textarea:invalid:not(:placeholder-shown),
.select--error {
    border-color: var(--surface-error);
    outline-color: var(--surface-error);
    color: var(--text-on-error);
    background-color: var(--surface-error-subtle);
}

input:invalid:not(:placeholder-shown):focus-visible,
input:valid:not(:placeholder-shown):focus-visible {
    outline-color: var(--surface-accent);
    outline-offset: calc(var(--size-1) * 0.5);
}

input:invalid:not(:placeholder-shown):focus-visible {
    border-color: var(--surface-error);
}

.textarea--error:focus,
.select--error:focus {
    border-color: var(--surface-error);
}

input:valid:not(:placeholder-shown),
textarea:valid,
.select--valid {
    border-color: var(--surface-success);
    background-color: var(--surface-success-subtle);
    color: var(--text-on-success);
}

input:valid:not(:placeholder-shown):focus-visible,
textarea:valid:focus,
.select--valid:focus {
    border-color: var(--surface-success);
}

/* Textarea Specific */
textarea {
    min-height: 6rem;
    resize: vertical;
}

/* Select Specific */
select {
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' stroke='%23666' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='4 6 8 10 12 6'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right var(--size-2) center;
    background-size: 1em;
    padding-right: var(--size-8);
}

/* Checkbox & Radio */
input[type="checkbox"],
input[type="radio"] {
    appearance: none;
    display: inline-block;
    width: 1rem;
    height: 1rem;
    margin: 0;
    padding: 0;
    vertical-align: middle;
    border: var(--stroke-1) solid var(--surface-neutral-subtle);
    border-radius: 0.25rem;
    background-color: var(--surface-neutral);
    cursor: pointer;
    transition:
        background-color var(--transition-micro-medium),
        border-color var(--transition-micro-medium),
        outline-color var(--transition-micro-medium);
}

input[type="radio"] {
    border-radius: 50%;
}

/* Hover & Focus */
input[type="checkbox"]:hover,
input[type="radio"]:hover {
    border-color: var(--surface-accent-hover);
}

input[type="checkbox"]:focus,
input[type="radio"]:focus {
    outline: var(--stroke-1) solid var(--surface-accent);
    outline-offset: 0.1rem;
}

/* Checked State */
input[type="checkbox"]:checked {
    background-color: var(--surface-brand);
    border-color: var(--surface-brand);
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='white' d='M6.173 11.414l-3.95-3.95 1.414-1.414L6.173 8.586l6.364-6.364 1.414 1.414z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: center;
    background-size: 0.75rem;
}

input[type="radio"]:checked {
    background-color: var(--surface-brand);
    border-color: var(--surface-brand);
    background-image: radial-gradient(circle, var(--text-on-brand) 40%, transparent 50%);
    background-position: center;
    background-repeat: no-repeat;
}

/* Disabled */
input[type="checkbox"]:disabled,
input[type="radio"]:disabled {
    background-color: var(--surface-neutral-subtle);
    border-color: var(--surface-neutral-hover);
    cursor: not-allowed;
    opacity: 0.6;
}

/* Switch / Toggle */
.switch {
    --_switch-width: 2rem;
    --_switch-height: 1.25rem;
    --_switch-padding: 0.125rem;

    position: relative;
    display: inline-block;
    width: var(--_switch-width);
    height: var(--_switch-height);
}

.switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.switch-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--surface-neutral-hover);
    border-radius: 9999px;
    transition: background-color var(--transition-anticipate-medium);
}

.switch-slider::before {
    content: "";
    position: absolute;
    height: 1rem;
    width: 1rem;
    left: calc(var(--size-1) * 0.5);
    bottom: calc(var(--size-1) * 0.5);
    background-color: var(--surface-neutral-subtle);
    border-radius: 50%;
    /* Sun icon - light mode */
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23666'%3E%3Ccircle cx='12' cy='12' r='4'/%3E%3Cpath d='M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M4.93 19.07l1.41-1.41m11.32-11.32l1.41-1.41'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: center;
    background-size: 0.625rem;
    transition:
        transform var(--transition-spring-fast),
        background-color var(--transition-anticipate-medium),
        background-image var(--transition-anticipate-medium);
}

/* Checked state */
.switch input:checked + .switch-slider {
    background-color: var(--surface-brand);
}

.switch input:checked + .switch-slider::before {
    /* Moon icon - dark mode */
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23666'%3E%3Cpath d='M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z'/%3E%3C/svg%3E");
    transform: translateX(calc(var(--_switch-width) - var(--_switch-height)));
}

/* Disabled */
.switch input:disabled + .switch-slider {
    background-color: var(--surface-neutral-subtle);
    cursor: not-allowed;
    opacity: 0.6;
}

.switch-slider:hover,
.switch input:checked + .switch-slider:hover {
    background-color: var(--surface-brand-hover);
}

.switch-slider:hover::before {
    background-color: var(--surface-neutral);
}

/* Form Group */
.form-group {
    margin-bottom: var(--size-4);
}

/* Labels */
.form-label {
    display: block;
    margin-bottom: var(--size-2);
    font-family: var(--font-family-base);
    font-size: var(--font-size-sm);
    font-weight: 500;
    line-height: var(--lh-tight);
    color: var(--text-neutral);
}

/* Disabled label */
.form-label.is-disabled {
    color: var(--text-neutral-subtle);
}

/* Helper Text / Descriptions */
.form-helper {
    display: none;
    margin-top: var(--size-1);
    font-size: var(--font-size-xs);
    line-height: var(--lh-base);
    color: var(--text-neutral-subtle);
}

input:invalid:not(:placeholder-shown) ~ .form-helper,
select:invalid ~ .form-helper,
textarea:invalid:not(:placeholder-shown) ~ .form-helper {
    display: block;
}

/* Success / Error helper text */
.form-helper-success {
    color: var(--text-success);
}

.form-helper-error {
    color: var(--text-error);
}
.form-general-error {
    display: none;
    color: var(--text-on-error-color);
    background-color: var(--surface-error-subtle);
    margin-bottom: var(--size-1);
    padding: var(--size-1) var(--size-2);
    font-size: var(--font-size-xs);
    border-radius: var(--radius-sm);
}

/* Checkbox / Radio Label Wrappers */
.form-check {
    display: flex;
    align-items: center;
    gap: var(--size-2);
    margin-bottom: var(--size-2);
}

.form-check-input {
    flex-shrink: 0;
}

.form-check-label {
    font-size: var(--font-size-sm);
    color: var(--text-neutral);
    cursor: pointer;
}

.form-check-label.is-disabled {
    color: var(--text-neutral-subtle);
    cursor: not-allowed;
}

/* Switch Label Wrappers */
.form-switch {
    display: flex;
    align-items: center;
    gap: var(--size-2);
}

.form-switch-label {
    font-size: var(--font-size-sm);
    color: var(--text-neutral);
    cursor: pointer;
}

.form-switch-label.is-disabled {
    color: var(--text-neutral-subtle);
    cursor: not-allowed;
}
