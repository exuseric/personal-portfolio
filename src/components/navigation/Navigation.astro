---
import { Image } from "astro:assets"
import data from "@/data/navigation.json"
const { nav } = data
import LogoImage from "@/images/logo/white-horn-purple-bg.png"
import NavMenu from "@/components/navigation/NavMenu.astro"
import NavActions from "./NavActions.astro"
import "./navigation.css"
---

<header class="nav container" data-navigation>
    <div class="wrapper">
        <div class="nav__container" data-active="false" data-navigation-container>
            <a href="/" class="nav__logo">
                <Image
                    src={LogoImage}
                    width={LogoImage.width}
                    height={LogoImage.height}
                    alt={nav.logo.text}
                    loading="eager"
                    decoding="sync"
                    class="nav__logo__img"
                    layout="fixed"
                />
            </a>
            <NavMenu />
            <NavActions />
        </div>
    </div>
</header>

<script>
    window.addEventListener("DOMContentLoaded", () => {
        const navContainer = document.querySelector<HTMLElement>("[data-navigation-container]")
        if (!navContainer) return

        const updateNavState = () => {
            navContainer.dataset.active = window.scrollY > 10 ? "true" : "false"
        }

        window.addEventListener("scroll", () => requestAnimationFrame(updateNavState), { passive: true })

        window.addEventListener("ToggleMenu", () => {
            if (navContainer.dataset.active !== "true") {
                navContainer.dataset.active = "true"
            }
        })
    })
</script>
